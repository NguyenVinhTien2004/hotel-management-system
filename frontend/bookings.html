<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω ƒë·∫∑t ph√≤ng - Kh√°ch s·∫°n Cocotier</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="modal-scroll-fix.css">
    <link rel="stylesheet" href="cocotier-logo-image.css">
    <script src="modal-scroll-fix.js"></script>
</head>
<body class="bg-gray-100">
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <button onclick="window.history.back()" class="mr-3 p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                    </button>
                    <a href="dashboard.html" class="mr-3">
                        <div class="w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-green-600 text-lg font-bold">üå¥</div>
                    </a>
                    <h1 class="text-xl font-semibold">Qu·∫£n l√Ω ƒë·∫∑t ph√≤ng</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="showAddBookingModal()" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700">ƒê·∫∑t ph√≤ng m·ªõi</button>
                    <button onclick="logout()" class="text-red-600 hover:text-red-700">ƒêƒÉng xu·∫•t</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <div class="px-4 py-6 sm:px-0">
            <div class="bg-white shadow rounded-lg">
                <div class="px-6 py-4 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-medium text-gray-900">Danh s√°ch ƒë·∫∑t ph√≤ng</h3>
                        <div class="flex space-x-2">
                            <select id="statusFilter" class="border border-gray-300 rounded-md px-3 py-2">
                                <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                                <option value="pending">Ch·ªù x√°c nh·∫≠n</option>
                                <option value="confirmed">ƒê√£ x√°c nh·∫≠n</option>
                                <option value="checked_in">ƒê√£ nh·∫≠n ph√≤ng</option>
                                <option value="checked_out">ƒê√£ tr·∫£ ph√≤ng</option>
                                <option value="cancelled">ƒê√£ h·ªßy</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">M√£ ƒë·∫∑t ph√≤ng</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Kh√°ch h√†ng</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ph√≤ng</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ng√†y nh·∫≠n</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ng√†y tr·∫£</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">T·ªïng ti·ªÅn</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tr·∫°ng th√°i</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">H√†nh ƒë·ªông</th>
                            </tr>
                        </thead>
                        <tbody id="bookingsTableBody" class="bg-white divide-y divide-gray-200">
                            <!-- Bookings will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Booking Modal -->
    <div id="addBookingModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden overflow-y-auto">
        <div class="flex items-start justify-center min-h-screen py-8 px-4">
            <div class="bg-white rounded-lg shadow-lg max-w-lg w-full max-h-[90vh] overflow-y-auto">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h3 class="text-lg font-medium text-gray-900">ƒê·∫∑t ph√≤ng m·ªõi</h3>
                </div>
                <form id="addBookingForm" class="px-6 py-4 space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">T√™n kh√°ch h√†ng</label>
                            <input type="text" id="customerName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">S·ªë ƒëi·ªán tho·∫°i</label>
                            <input type="tel" id="customerPhone" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" id="customerEmail" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ph√≤ng</label>
                        <select id="roomSelect" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                            <option value="">Ch·ªçn ph√≤ng</option>
                        </select>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ng√†y nh·∫≠n ph√≤ng</label>
                            <input type="date" id="checkInDate" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ng√†y tr·∫£ ph√≤ng</label>
                            <input type="date" id="checkOutDate" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">S·ªë ng∆∞·ªùi</label>
                        <input type="number" id="guestCount" min="1" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">D·ªãch v·ª• th√™m (t√πy ch·ªçn)</label>
                        <div id="servicesContainer" class="space-y-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md p-3">
                            <!-- Services will be loaded here -->
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ph∆∞∆°ng th·ª©c thanh to√°n</label>
                        <select id="paymentMethod" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                            <option value="">Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n</option>
                            <option value="cash">Ti·ªÅn m·∫∑t</option>
                            <option value="bank_transfer">Chuy·ªÉn kho·∫£n ng√¢n h√†ng</option>
                            <option value="credit_card">Th·∫ª t√≠n d·ª•ng</option>
                            <option value="e_wallet">V√≠ ƒëi·ªán t·ª≠</option>
                        </select>
                    </div>
                    <div id="totalAmountDisplay" class="bg-gray-50 p-3 rounded-md">
                        <div class="space-y-2">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Ti·ªÅn ph√≤ng:</span>
                                <span id="roomTotal" class="text-sm font-medium">0 VND</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Ti·ªÅn d·ªãch v·ª•:</span>
                                <span id="servicesTotal" class="text-sm font-medium">0 VND</span>
                            </div>
                            <hr class="border-gray-300">
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-medium text-gray-700">T·ªïng ti·ªÅn:</span>
                                <span id="totalAmount" class="text-lg font-bold text-green-600">0 VND</span>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500 mt-2">
                            <span id="nightsCount">0 ƒë√™m</span> √ó <span id="roomPrice">0 VND</span>/ƒë√™m
                        </div>
                    </div>
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" onclick="hideAddBookingModal()" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">H·ªßy</button>
                        <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700">ƒê·∫∑t ph√≤ng</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:3001/api';
        
        function checkAuth() {
            const token = localStorage.getItem('token');
            if (!token) {
                window.location.href = 'index.html';
            }
        }
        
        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = 'index.html';
        }
        
        function showAddBookingModal() {
            document.getElementById('addBookingModal').classList.remove('hidden');
            loadAvailableRooms();
            loadAvailableServices();
        }
        
        // Make function global
        window.showAddBookingModal = showAddBookingModal;
        
        function hideAddBookingModal() {
            document.getElementById('addBookingModal').classList.add('hidden');
            document.getElementById('addBookingForm').reset();
            // Reset service checkboxes
            document.querySelectorAll('.service-checkbox').forEach(cb => cb.checked = false);
            calculateTotal();
        }
        
        // Make function global
        window.hideAddBookingModal = hideAddBookingModal;
        
        async function loadBookings(statusFilter = '') {
            const token = localStorage.getItem('token');
            try {
                console.log('üîÑ Loading bookings...');
                console.log('üîë Token:', token ? 'Present' : 'Missing');
                
                if (!token) {
                    document.getElementById('bookingsTableBody').innerHTML = `
                        <tr><td colspan="8" class="text-center py-4 text-red-500">Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ xem ƒë·∫∑t ph√≤ng</td></tr>
                    `;
                    return;
                }
                
                const response = await fetch(`${API_URL}/bookings`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                console.log('üì° Bookings response status:', response.status);
                
                if (response.ok) {
                    const data = await response.json();
                    let bookings = data.bookings || [];
                    
                    console.log('‚úÖ Loaded bookings:', bookings.length);
                    
                    if (statusFilter) {
                        bookings = bookings.filter(b => b.status === statusFilter);
                        console.log('üîç Filtered bookings:', bookings.length, 'with status:', statusFilter);
                    }
                    
                    if (bookings.length === 0) {
                        document.getElementById('bookingsTableBody').innerHTML = `
                            <tr><td colspan="8" class="text-center py-4 text-gray-500">Kh√¥ng c√≥ ƒë·∫∑t ph√≤ng n√†o</td></tr>
                        `;
                    } else {
                        displayBookings(bookings);
                    }
                } else {
                    console.error('‚ùå Failed to load bookings:', response.status);
                    const errorText = await response.text();
                    console.error('‚ùå Error response:', errorText);
                    
                    document.getElementById('bookingsTableBody').innerHTML = `
                        <tr><td colspan="8" class="text-center py-4 text-red-500">L·ªói t·∫£i d·ªØ li·ªáu ƒë·∫∑t ph√≤ng (${response.status})</td></tr>
                    `;
                }
            } catch (error) {
                console.error('‚ùå Error loading bookings:', error);
                document.getElementById('bookingsTableBody').innerHTML = `
                    <tr><td colspan="8" class="text-center py-4 text-red-500">L·ªói k·∫øt n·ªëi: ${error.message}</td></tr>
                `;
            }
        }
        
        async function loadAvailableRooms() {
            const token = localStorage.getItem('token');
            try {
                const response = await fetch(`${API_URL}/rooms?status=available`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    const roomSelect = document.getElementById('roomSelect');
                    roomSelect.innerHTML = '<option value="">Ch·ªçn ph√≤ng</option>' +
                        data.rooms.map(room => `<option value="${room.id}" data-price="${room.price}">${room.number} - ${room.name} (${room.type}) - ${parseInt(room.price).toLocaleString('vi-VN')} VND</option>`).join('');
                }
            } catch (error) {
                console.error('Error loading rooms:', error);
            }
        }
        
        async function loadAvailableServices() {
            try {
                const response = await fetch(`${API_URL}/services`);
                if (response.ok) {
                    const data = await response.json();
                    displayServices(data.services || []);
                }
            } catch (error) {
                console.error('Error loading services:', error);
            }
        }
        
        function displayServices(services) {
            const container = document.getElementById('servicesContainer');
            if (services.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-sm">Kh√¥ng c√≥ d·ªãch v·ª• n√†o</p>';
                return;
            }
            
            container.innerHTML = services.map(service => `
                <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded">
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" id="service_${service.id}" class="service-checkbox" 
                               data-price="${service.price}" data-name="${service.name}" 
                               onchange="calculateTotal()">
                        <label for="service_${service.id}" class="text-sm font-medium text-gray-700 cursor-pointer">
                            ${service.name}
                        </label>
                    </div>
                    <span class="text-sm text-green-600 font-medium">${parseInt(service.price).toLocaleString('vi-VN')} VND</span>
                </div>
            `).join('');
        }
        
        function displayBookings(bookings) {
            const tbody = document.getElementById('bookingsTableBody');
            tbody.innerHTML = bookings.map(booking => `
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#${booking.id}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${booking.customer_name}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <div class="font-medium">${booking.room_number}</div>
                        <div class="text-xs text-gray-400">${booking.room_name || ''}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatDate(booking.check_in)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatDate(booking.check_out)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${booking.total_amount.toLocaleString('vi-VN')} VND</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getBookingStatusColor(booking.status)}">
                            ${getBookingStatusText(booking.status)}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        ${getBookingActions(booking)}
                    </td>
                </tr>
            `).join('');
        }
        
        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('vi-VN');
        }
        
        function getBookingStatusColor(status) {
            switch(status) {
                case 'pending': return 'bg-yellow-100 text-yellow-800';
                case 'confirmed': return 'bg-green-100 text-green-800';
                case 'checked_in': return 'bg-blue-100 text-blue-800';
                case 'checked_out': return 'bg-gray-100 text-gray-800';
                case 'cancelled': return 'bg-red-100 text-red-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }
        
        function getBookingStatusText(status) {
            switch(status) {
                case 'pending': return 'Ch·ªù x√°c nh·∫≠n';
                case 'confirmed': return 'ƒê√£ x√°c nh·∫≠n';
                case 'checked_in': return 'ƒê√£ nh·∫≠n ph√≤ng';
                case 'checked_out': return 'ƒê√£ tr·∫£ ph√≤ng';
                case 'cancelled': return 'ƒê√£ h·ªßy';
                default: return 'Kh√¥ng x√°c ƒë·ªãnh';
            }
        }
        
        function calculateTotal() {
            const roomSelect = document.getElementById('roomSelect');
            const checkIn = document.getElementById('checkInDate').value;
            const checkOut = document.getElementById('checkOutDate').value;
            
            let roomTotal = 0;
            let nights = 0;
            let roomPrice = 0;
            
            if (roomSelect.value && checkIn && checkOut) {
                const selectedOption = roomSelect.options[roomSelect.selectedIndex];
                // L·∫•y gi√° t·ª´ data attribute ho·∫∑c parse t·ª´ text
                if (roomSelect.selectedIndex > 0) {
                    const option = roomSelect.options[roomSelect.selectedIndex];
                    if (option.dataset.price) {
                        roomPrice = parseInt(option.dataset.price);
                    } else {
                        // Fallback: parse t·ª´ text n·∫øu kh√¥ng c√≥ data-price
                        const priceMatch = option.text.match(/(\d+(?:[.,]\d{3})*) VND/);
                        if (priceMatch) {
                            roomPrice = parseInt(priceMatch[1].replace(/[.,]/g, ''));
                        }
                    }
                }
                
                const checkInDate = new Date(checkIn);
                const checkOutDate = new Date(checkOut);
                nights = Math.ceil((checkOutDate - checkInDate) / (1000 * 60 * 60 * 24));
                
                if (nights > 0) {
                    roomTotal = roomPrice * nights;
                }
            }
            
            // Calculate services total
            let servicesTotal = 0;
            document.querySelectorAll('.service-checkbox:checked').forEach(checkbox => {
                const servicePrice = parseFloat(checkbox.getAttribute('data-price')) || 0;
                servicesTotal += servicePrice;
            });
            
            const grandTotal = roomTotal + servicesTotal;
            
            // Update display
            document.getElementById('roomTotal').textContent = Math.round(roomTotal).toLocaleString('vi-VN') + ' VND';
            document.getElementById('servicesTotal').textContent = Math.round(servicesTotal).toLocaleString('vi-VN') + ' VND';
            document.getElementById('totalAmount').textContent = Math.round(grandTotal).toLocaleString('vi-VN') + ' VND';
            document.getElementById('nightsCount').textContent = nights + ' ƒë√™m';
            document.getElementById('roomPrice').textContent = Math.round(roomPrice).toLocaleString('vi-VN') + ' VND';
        }
        
        function getBookingActions(booking) {
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            const isAdmin = user.role === 'admin' || user.role === 'staff';
            
            if (!isAdmin) {
                if (booking.status === 'pending') {
                    return `<button onclick="updateBookingStatus(${booking.id}, 'cancelled')" class="text-red-600 hover:text-red-900">H·ªßy ƒë·∫∑t ph√≤ng</button>`;
                }
                return '<span class="text-gray-400">Kh√¥ng c√≥ h√†nh ƒë·ªông</span>';
            }
            
            switch(booking.status) {
                case 'pending':
                    return `
                        <button onclick="updateBookingStatus(${booking.id}, 'confirmed')" class="text-green-600 hover:text-green-900 mr-2">X√°c nh·∫≠n</button>
                        <button onclick="updateBookingStatus(${booking.id}, 'cancelled')" class="text-red-600 hover:text-red-900">H·ªßy</button>
                    `;
                case 'confirmed':
                    return `
                        <button onclick="updateBookingStatus(${booking.id}, 'checked_in')" class="text-blue-600 hover:text-blue-900 mr-2">Nh·∫≠n ph√≤ng</button>
                        <button onclick="updateBookingStatus(${booking.id}, 'cancelled')" class="text-red-600 hover:text-red-900">H·ªßy</button>
                    `;
                case 'checked_in':
                    return `<button onclick="updateBookingStatus(${booking.id}, 'checked_out')" class="text-purple-600 hover:text-purple-900">Tr·∫£ ph√≤ng</button>`;
                default:
                    return '<span class="text-gray-400">Ho√†n th√†nh</span>';
            }
        }
        
        document.getElementById('addBookingForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const token = localStorage.getItem('token');
            
            // Get selected services
            const selectedServices = [];
            document.querySelectorAll('.service-checkbox:checked').forEach(checkbox => {
                selectedServices.push({
                    id: checkbox.id.replace('service_', ''),
                    name: checkbox.getAttribute('data-name'),
                    price: parseFloat(checkbox.getAttribute('data-price')) || 0
                });
            });
            
            const bookingData = {
                customer_name: document.getElementById('customerName').value,
                customer_phone: document.getElementById('customerPhone').value,
                customer_email: document.getElementById('customerEmail').value,
                room_id: document.getElementById('roomSelect').value,
                check_in: document.getElementById('checkInDate').value,
                check_out: document.getElementById('checkOutDate').value,
                guest_count: parseInt(document.getElementById('guestCount').value),
                payment_method: document.getElementById('paymentMethod').value,
                selected_services: selectedServices
            };
            
            try {
                const response = await fetch(`${API_URL}/bookings`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(bookingData)
                });
                
                if (response.ok) {
                    hideAddBookingModal();
                    loadBookings();
                    alert('ƒê·∫∑t ph√≤ng th√†nh c√¥ng!');
                } else {
                    const error = await response.json();
                    alert(error.message || 'C√≥ l·ªói x·∫£y ra');
                }
            } catch (error) {
                alert('L·ªói k·∫øt n·ªëi server');
            }
        });
        
        async function updateBookingStatus(bookingId, status) {
            const token = localStorage.getItem('token');
            console.log('Updating booking:', bookingId, 'to status:', status);
            
            try {
                const response = await fetch(`${API_URL}/bookings/${bookingId}/status`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ status })
                });
                
                console.log('Response status:', response.status);
                
                if (response.ok) {
                    const result = await response.json();
                    console.log('Update result:', result);
                    loadBookings();
                    alert('C·∫≠p nh·∫≠t tr·∫°ng th√°i th√†nh c√¥ng!');
                } else {
                    const error = await response.json();
                    console.error('Update error:', error);
                    alert(error.message || 'C√≥ l·ªói x·∫£y ra khi c·∫≠p nh·∫≠t');
                }
            } catch (error) {
                console.error('Network error:', error);
                alert('L·ªói k·∫øt n·ªëi server: ' + error.message);
            }
        }
        
        // Th√™m event listeners
        document.getElementById('roomSelect').addEventListener('change', calculateTotal);
        document.getElementById('checkInDate').addEventListener('change', calculateTotal);
        document.getElementById('checkOutDate').addEventListener('change', calculateTotal);
        document.getElementById('statusFilter').addEventListener('change', (e) => {
            loadBookings(e.target.value);
        });
        
        checkAuth();
        loadBookings();
    </script>
</body>
</html>
